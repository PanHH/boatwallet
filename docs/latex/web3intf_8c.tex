\hypertarget{web3intf_8c}{}\section{web3intf.\+c File Reference}
\label{web3intf_8c}\index{web3intf.\+c@{web3intf.\+c}}


Web3 interface.  


{\ttfamily \#include \char`\"{}wallet/boattypes.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}utilities/utility.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}rpc/rpcintf.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}rpc/curlport.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}c\+J\+S\+O\+N.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}web3/web3intf.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}randgenerator.\+h\char`\"{}}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{web3intf_8c_af8e2a9e3ee913a177be5958dede7bf6a}{W\+E\+B3\+\_\+\+J\+S\+O\+N\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+B\+U\+F\+\_\+\+M\+A\+X\+\_\+\+S\+I\+ZE}}~4096
\begin{DoxyCompactList}\small\item\em M\+AX size of g\+\_\+web3\+\_\+json\+\_\+string\+\_\+buf. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{web3intf_8c_a958d511d48bc2c163e511c43b8c5e695}{W\+E\+B3\+\_\+\+R\+E\+S\+U\+L\+T\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+B\+U\+F\+\_\+\+M\+A\+X\+\_\+\+S\+I\+ZE}}~\mbox{\hyperlink{web3intf_8c_af8e2a9e3ee913a177be5958dede7bf6a}{W\+E\+B3\+\_\+\+J\+S\+O\+N\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+B\+U\+F\+\_\+\+M\+A\+X\+\_\+\+S\+I\+ZE}}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{boattypes_8h_a032dd611b487ea287252cd8bea128df9}{B\+O\+A\+T\+\_\+\+R\+E\+S\+U\+LT}} \mbox{\hyperlink{web3intf_8c_acb4a69aaceea7fb0b099d5596782d620}{web3\+\_\+\+J\+S\+O\+N\+\_\+parse\+\_\+item}} (const \mbox{\hyperlink{boattypes_8h_aebb9e13210d88d43e32e735ada43a425}{C\+H\+AR}} $\ast$rpc\+\_\+response\+\_\+str, const \mbox{\hyperlink{boattypes_8h_aebb9e13210d88d43e32e735ada43a425}{C\+H\+AR}} $\ast$item\+\_\+name)
\begin{DoxyCompactList}\small\item\em Parse an item from a J\+S\+ON string. \end{DoxyCompactList}\item 
\mbox{\hyperlink{boattypes_8h_a032dd611b487ea287252cd8bea128df9}{B\+O\+A\+T\+\_\+\+R\+E\+S\+U\+LT}} \mbox{\hyperlink{web3intf_8c_a1b4a7ab4c423675490f21482bfbde5ff}{web3\+\_\+init}} (void)
\begin{DoxyCompactList}\small\item\em Initialize web3 interface. \end{DoxyCompactList}\item 
\mbox{\hyperlink{boattypes_8h_aebb9e13210d88d43e32e735ada43a425}{C\+H\+AR}} $\ast$ \mbox{\hyperlink{web3intf_8c_a6561f38f788b3ebe93c66a1db255377a}{web3\+\_\+eth\+\_\+get\+Transaction\+Count}} (const char $\ast$node\+\_\+url\+\_\+str, const \mbox{\hyperlink{web3intf_8h_af60968cddc872b9f87fbfa4f177c7cc6}{Param\+\_\+eth\+\_\+get\+Transaction\+Count}} $\ast$param\+\_\+ptr)
\begin{DoxyCompactList}\small\item\em Perform eth\+\_\+get\+Transaction\+Count R\+PC method and get the transaction count of the specified account. \end{DoxyCompactList}\item 
\mbox{\hyperlink{boattypes_8h_aebb9e13210d88d43e32e735ada43a425}{C\+H\+AR}} $\ast$ \mbox{\hyperlink{web3intf_8c_a68e5b31310d0023ebf4b4403e87fe4b7}{web3\+\_\+eth\+\_\+gas\+Price}} (const char $\ast$node\+\_\+url\+\_\+str)
\begin{DoxyCompactList}\small\item\em Perform eth\+\_\+gas\+Price R\+PC method and get the current price per gas in wei of the specified network. \end{DoxyCompactList}\item 
\mbox{\hyperlink{boattypes_8h_aebb9e13210d88d43e32e735ada43a425}{C\+H\+AR}} $\ast$ \mbox{\hyperlink{web3intf_8c_ae65319be9cc0257c333a14ed4ab504cf}{web3\+\_\+eth\+\_\+send\+Raw\+Transaction}} (const char $\ast$node\+\_\+url\+\_\+str, const \mbox{\hyperlink{web3intf_8h_afa9fbcf8be2b8e8901a1725cf91d0287}{Param\+\_\+eth\+\_\+send\+Raw\+Transaction}} $\ast$param\+\_\+ptr)
\begin{DoxyCompactList}\small\item\em Perform eth\+\_\+send\+Raw\+Transaction R\+PC method. \end{DoxyCompactList}\item 
\mbox{\hyperlink{boattypes_8h_aebb9e13210d88d43e32e735ada43a425}{C\+H\+AR}} $\ast$ \mbox{\hyperlink{web3intf_8c_a5bded37fe47d7967324a7c453752a58f}{web3\+\_\+eth\+\_\+get\+Storage\+At}} (const char $\ast$node\+\_\+url\+\_\+str, const \mbox{\hyperlink{web3intf_8h_a60193c7d198da76496d0c20065cc1a45}{Param\+\_\+eth\+\_\+get\+Storage\+At}} $\ast$param\+\_\+ptr)
\begin{DoxyCompactList}\small\item\em Perform eth\+\_\+get\+Storage\+At R\+PC method. \end{DoxyCompactList}\item 
\mbox{\hyperlink{boattypes_8h_aebb9e13210d88d43e32e735ada43a425}{C\+H\+AR}} $\ast$ \mbox{\hyperlink{web3intf_8c_a114d1baf518f248dfad3d64ccca67f81}{web3\+\_\+eth\+\_\+get\+Transaction\+Receipt\+Status}} (const char $\ast$node\+\_\+url\+\_\+str, const \mbox{\hyperlink{web3intf_8h_af16395f7148bffd6b025dbe680b88c8f}{Param\+\_\+eth\+\_\+get\+Transaction\+Receipt}} $\ast$param\+\_\+ptr)
\begin{DoxyCompactList}\small\item\em Perform eth\+\_\+get\+Transaction\+Receipt R\+PC method. \end{DoxyCompactList}\item 
\mbox{\hyperlink{boattypes_8h_aebb9e13210d88d43e32e735ada43a425}{C\+H\+AR}} $\ast$ \mbox{\hyperlink{web3intf_8c_a7116548e501f02dd2d2cda471a1dae4f}{web3\+\_\+eth\+\_\+call}} (const char $\ast$node\+\_\+url\+\_\+str, const \mbox{\hyperlink{web3intf_8h_a9e5a37932b7d18412a47bd4942121300}{Param\+\_\+eth\+\_\+call}} $\ast$param\+\_\+ptr)
\begin{DoxyCompactList}\small\item\em Perform eth\+\_\+call R\+PC method. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{boattypes_8h_ae1e6edbbc26d6fbc71a90190d0266018}{U\+I\+N\+T32}} \mbox{\hyperlink{web3intf_8c_a5501302a7b6519a397f668181845eb58}{g\+\_\+web3\+\_\+message\+\_\+id}} = 0
\begin{DoxyCompactList}\small\item\em Message ID to distinguish different messages. \end{DoxyCompactList}\item 
\mbox{\hyperlink{boattypes_8h_aebb9e13210d88d43e32e735ada43a425}{C\+H\+AR}} \mbox{\hyperlink{web3intf_8c_aea9352a07b6c75e66af94c1d9db0d05f}{g\+\_\+web3\+\_\+json\+\_\+string\+\_\+buf}} \mbox{[}\mbox{\hyperlink{web3intf_8c_af8e2a9e3ee913a177be5958dede7bf6a}{W\+E\+B3\+\_\+\+J\+S\+O\+N\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+B\+U\+F\+\_\+\+M\+A\+X\+\_\+\+S\+I\+ZE}}\mbox{]}
\begin{DoxyCompactList}\small\item\em A J\+S\+ON string buffer used for both R\+E\+Q\+U\+E\+ST and R\+E\+S\+P\+O\+N\+SE. \end{DoxyCompactList}\item 
\mbox{\hyperlink{boattypes_8h_aebb9e13210d88d43e32e735ada43a425}{C\+H\+AR}} $\ast$ \mbox{\hyperlink{web3intf_8c_a80e97b532acd8e557ae2ca218e35cb02}{g\+\_\+web3\+\_\+result\+\_\+string\+\_\+buf}} = \mbox{\hyperlink{web3intf_8c_aea9352a07b6c75e66af94c1d9db0d05f}{g\+\_\+web3\+\_\+json\+\_\+string\+\_\+buf}}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Web3 interface. 

contains web3 interface functions for R\+PC. 

\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{web3intf_8c_af8e2a9e3ee913a177be5958dede7bf6a}\label{web3intf_8c_af8e2a9e3ee913a177be5958dede7bf6a}} 
\index{web3intf.\+c@{web3intf.\+c}!W\+E\+B3\+\_\+\+J\+S\+O\+N\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+B\+U\+F\+\_\+\+M\+A\+X\+\_\+\+S\+I\+ZE@{W\+E\+B3\+\_\+\+J\+S\+O\+N\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+B\+U\+F\+\_\+\+M\+A\+X\+\_\+\+S\+I\+ZE}}
\index{W\+E\+B3\+\_\+\+J\+S\+O\+N\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+B\+U\+F\+\_\+\+M\+A\+X\+\_\+\+S\+I\+ZE@{W\+E\+B3\+\_\+\+J\+S\+O\+N\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+B\+U\+F\+\_\+\+M\+A\+X\+\_\+\+S\+I\+ZE}!web3intf.\+c@{web3intf.\+c}}
\subsubsection{\texorpdfstring{W\+E\+B3\+\_\+\+J\+S\+O\+N\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+B\+U\+F\+\_\+\+M\+A\+X\+\_\+\+S\+I\+ZE}{WEB3\_JSON\_STRING\_BUF\_MAX\_SIZE}}
{\footnotesize\ttfamily \#define W\+E\+B3\+\_\+\+J\+S\+O\+N\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+B\+U\+F\+\_\+\+M\+A\+X\+\_\+\+S\+I\+ZE~4096}



M\+AX size of g\+\_\+web3\+\_\+json\+\_\+string\+\_\+buf. 

\mbox{\Hypertarget{web3intf_8c_a958d511d48bc2c163e511c43b8c5e695}\label{web3intf_8c_a958d511d48bc2c163e511c43b8c5e695}} 
\index{web3intf.\+c@{web3intf.\+c}!W\+E\+B3\+\_\+\+R\+E\+S\+U\+L\+T\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+B\+U\+F\+\_\+\+M\+A\+X\+\_\+\+S\+I\+ZE@{W\+E\+B3\+\_\+\+R\+E\+S\+U\+L\+T\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+B\+U\+F\+\_\+\+M\+A\+X\+\_\+\+S\+I\+ZE}}
\index{W\+E\+B3\+\_\+\+R\+E\+S\+U\+L\+T\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+B\+U\+F\+\_\+\+M\+A\+X\+\_\+\+S\+I\+ZE@{W\+E\+B3\+\_\+\+R\+E\+S\+U\+L\+T\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+B\+U\+F\+\_\+\+M\+A\+X\+\_\+\+S\+I\+ZE}!web3intf.\+c@{web3intf.\+c}}
\subsubsection{\texorpdfstring{W\+E\+B3\+\_\+\+R\+E\+S\+U\+L\+T\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+B\+U\+F\+\_\+\+M\+A\+X\+\_\+\+S\+I\+ZE}{WEB3\_RESULT\_STRING\_BUF\_MAX\_SIZE}}
{\footnotesize\ttfamily \#define W\+E\+B3\+\_\+\+R\+E\+S\+U\+L\+T\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+B\+U\+F\+\_\+\+M\+A\+X\+\_\+\+S\+I\+ZE~\mbox{\hyperlink{web3intf_8c_af8e2a9e3ee913a177be5958dede7bf6a}{W\+E\+B3\+\_\+\+J\+S\+O\+N\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+B\+U\+F\+\_\+\+M\+A\+X\+\_\+\+S\+I\+ZE}}}



\subsection{Function Documentation}
\mbox{\Hypertarget{web3intf_8c_a7116548e501f02dd2d2cda471a1dae4f}\label{web3intf_8c_a7116548e501f02dd2d2cda471a1dae4f}} 
\index{web3intf.\+c@{web3intf.\+c}!web3\+\_\+eth\+\_\+call@{web3\+\_\+eth\+\_\+call}}
\index{web3\+\_\+eth\+\_\+call@{web3\+\_\+eth\+\_\+call}!web3intf.\+c@{web3intf.\+c}}
\subsubsection{\texorpdfstring{web3\+\_\+eth\+\_\+call()}{web3\_eth\_call()}}
{\footnotesize\ttfamily \mbox{\hyperlink{boattypes_8h_aebb9e13210d88d43e32e735ada43a425}{C\+H\+AR}}$\ast$ web3\+\_\+eth\+\_\+call (\begin{DoxyParamCaption}\item[{const char $\ast$}]{node\+\_\+url\+\_\+str,  }\item[{const \mbox{\hyperlink{web3intf_8h_a9e5a37932b7d18412a47bd4942121300}{Param\+\_\+eth\+\_\+call}} $\ast$}]{param\+\_\+ptr }\end{DoxyParamCaption})}



Perform eth\+\_\+call R\+PC method. 



 Function\+: \mbox{\hyperlink{web3intf_8c_a7116548e501f02dd2d2cda471a1dae4f}{web3\+\_\+eth\+\_\+call()}} \begin{DoxyVerb}This function calls RPC method eth_call and returns the return value of the
specified contract function.

This function can only call contract functions that don't change the block
STATE. To call contract functions that may change block STATE, use
eth_sendRawTransaction instead.

The typical RPC REQUEST is similar to:
\end{DoxyVerb}
 \begin{quote}
\{\char`\"{}jsonrpc\char`\"{}\+:\char`\"{}2.\+0\char`\"{},\char`\"{}method\char`\"{}\+:\char`\"{}eth\+\_\+call\char`\"{},\char`\"{}params\char`\"{}\+:\mbox{[}\{~\newline
 \char`\"{}from\char`\"{}\+: \char`\"{}0xb60e8dd61c5d32be8058bb8eb970870f07233155\char`\"{}, // Optional ~\newline
 \char`\"{}to\char`\"{}\+: \char`\"{}0xd46e8dd67c5d32be8058bb8eb970870f07244567\char`\"{},~\newline
 \char`\"{}gas\char`\"{}\+: \char`\"{}0x76c0\char`\"{}, // Optional, 30400~\newline
 \char`\"{}gas\+Price\char`\"{}\+: \char`\"{}0x9184e72a000\char`\"{}, // Optional, 10000000000000~\newline
 \char`\"{}value\char`\"{}\+: \char`\"{}0x0\char`\"{}, // Optional ~\newline
 \char`\"{}data\char`\"{}\+: \char`\"{}0xd46e8dd67c5d32be8d46e8dd67c5d32be8058bb8eb970870f072445675058bb8eb970870\char`\"{} //\+Optional ~\newline
 \}\mbox{]},\char`\"{}id\char`\"{}\+:1\} \end{quote}
\begin{DoxyVerb}The typical RPC RESPONSE from blockchain node is similar to:
{"id":1,"jsonrpc": "2.0","result": "0x0"}

This function takes 2 arguments. The first is the URL to the blockchian
node. Protocol and port must be explicitly specified in URL, such as
"http://127.0.0.1:7545". The second argument is a struct containing all
RPC call parameters as specified by ethereum.

See following wiki for details about RPC parameters and return value:
https://github.com/ethereum/wiki/wiki/JSON-RPC#json-rpc-api

This function could call a contract function without creating a transaction
on the block chain. The only mandatory parameter of eth_call is "to", which
is the address of the contract. Typically parameter "data" is also mandatory,
which is composed of 4-byte function selector followed by 0 or more parameters
regarding the contract function being called. See Ethereum Contract ABI for
the details about how to compose "data" field:
https://github.com/ethereum/wiki/wiki/Ethereum-Contract-ABI

An eth_call doesn't consume gas, but it's a good practice to specifiy the
"gas" parameter for better compatibility.

This function returns a string representing the item "result" of the
RESPONSE from the RPC call. The buffer storing the string is maintained by
web3intf and the caller shall NOT modify it, free it or save the address
for later use.
\end{DoxyVerb}


\begin{DoxyReturn}{Returns}
This function returns a string representing the returned value of the called~\newline
 contract function.
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em node\+\_\+url\+\_\+str} & A string indicating the U\+RL of blockchain node.\\
\hline
{\em param\+\_\+ptr} & The parameters of the eth\+\_\+call R\+PC method. Some optional parameters are omitted.~\newline
 to\+: The address of the contract.~\newline
 gas\+: The gas\+Limit.~\newline
 gas\+Price\+: The gas\+Price in wei.~\newline
 data\+: The function selector followed by parameters.~\newline
\\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{web3intf_8c_a68e5b31310d0023ebf4b4403e87fe4b7}\label{web3intf_8c_a68e5b31310d0023ebf4b4403e87fe4b7}} 
\index{web3intf.\+c@{web3intf.\+c}!web3\+\_\+eth\+\_\+gas\+Price@{web3\+\_\+eth\+\_\+gas\+Price}}
\index{web3\+\_\+eth\+\_\+gas\+Price@{web3\+\_\+eth\+\_\+gas\+Price}!web3intf.\+c@{web3intf.\+c}}
\subsubsection{\texorpdfstring{web3\+\_\+eth\+\_\+gas\+Price()}{web3\_eth\_gasPrice()}}
{\footnotesize\ttfamily \mbox{\hyperlink{boattypes_8h_aebb9e13210d88d43e32e735ada43a425}{C\+H\+AR}}$\ast$ web3\+\_\+eth\+\_\+gas\+Price (\begin{DoxyParamCaption}\item[{const char $\ast$}]{node\+\_\+url\+\_\+str }\end{DoxyParamCaption})}



Perform eth\+\_\+gas\+Price R\+PC method and get the current price per gas in wei of the specified network. 



 Function\+: \mbox{\hyperlink{web3intf_8c_a68e5b31310d0023ebf4b4403e87fe4b7}{web3\+\_\+eth\+\_\+gas\+Price()}} \begin{DoxyVerb}This function calls RPC method eth_gasPrice and returns a string
representing the current price per gas in wei of the specified network.

The typical RPC REQUEST is similar to:
{"jsonrpc":"2.0","method":"eth_gasPrice","params":[],"id":73}

The typical RPC RESPONSE from blockchain node is similar to:
{"id":73,"jsonrpc": "2.0","result": "0x09184e72a000"}


This function takes 1 arguments, which is the URL to the blockchian
node. Protocol and port must be explicitly specified in URL, such as
"http://127.0.0.1:7545". The eth_gasPrice RPC method itself doesn't take
any parameter.

See following wiki for details about RPC parameters and return value:
https://github.com/ethereum/wiki/wiki/JSON-RPC#json-rpc-api

This function returns a string representing the item "result" of the
RESPONSE from the RPC call. The buffer storing the string is maintained by
web3intf and the caller shall NOT modify it, free it or save the address
for later use.
\end{DoxyVerb}


\begin{DoxyReturn}{Returns}
This function returns a string representing the current price per gas in~\newline
 wei of the specified network.~\newline
 For example, if current gas price is 2000000000/gas, it will return~\newline
 \char`\"{}0x77359400\char`\"{}. Note the leading zeros are trimmed as specified in ethereum R\+PC~\newline
 interface.~\newline
 The gas\+Price returned from network is a reference for use in a transaction.~\newline
 Specify a higher gas\+Price in transaction may increase the posibility that~\newline
 the transcaction is get mined quicker and vice versa.~\newline
 If any error occurs or R\+PC call timeouts, it returns N\+U\+LL.
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em node\+\_\+url\+\_\+str} & A string indicating the U\+RL of blockchain node. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{web3intf_8c_a5bded37fe47d7967324a7c453752a58f}\label{web3intf_8c_a5bded37fe47d7967324a7c453752a58f}} 
\index{web3intf.\+c@{web3intf.\+c}!web3\+\_\+eth\+\_\+get\+Storage\+At@{web3\+\_\+eth\+\_\+get\+Storage\+At}}
\index{web3\+\_\+eth\+\_\+get\+Storage\+At@{web3\+\_\+eth\+\_\+get\+Storage\+At}!web3intf.\+c@{web3intf.\+c}}
\subsubsection{\texorpdfstring{web3\+\_\+eth\+\_\+get\+Storage\+At()}{web3\_eth\_getStorageAt()}}
{\footnotesize\ttfamily \mbox{\hyperlink{boattypes_8h_aebb9e13210d88d43e32e735ada43a425}{C\+H\+AR}}$\ast$ web3\+\_\+eth\+\_\+get\+Storage\+At (\begin{DoxyParamCaption}\item[{const char $\ast$}]{node\+\_\+url\+\_\+str,  }\item[{const \mbox{\hyperlink{web3intf_8h_a60193c7d198da76496d0c20065cc1a45}{Param\+\_\+eth\+\_\+get\+Storage\+At}} $\ast$}]{param\+\_\+ptr }\end{DoxyParamCaption})}



Perform eth\+\_\+get\+Storage\+At R\+PC method. 



 Function\+: \mbox{\hyperlink{web3intf_8c_a5bded37fe47d7967324a7c453752a58f}{web3\+\_\+eth\+\_\+get\+Storage\+At()}} \begin{DoxyVerb}This function calls RPC method eth_getStorageAt and returns a string
representing the storage data.

The typical RPC REQUEST is similar to:
{"jsonrpc":"2.0", "method": "eth_getStorageAt", "params": ["0x295a70b2de5e3953354a6a8344e616ed314d7251", "0x0", "latest"], "id": 1}

The typical RPC RESPONSE from blockchain node is similar to:
{"jsonrpc":"2.0","id":1,"result":"0x00000000000000000000000000000000000000000000000000000000000004d2"}

This function takes 2 arguments. The first is the URL to the blockchian
node. Protocol and port must be explicitly specified in URL, such as
"http://127.0.0.1:7545". The second argument is a struct containing all
RPC call parameters as specified by ethereum.

See following wiki for details about RPC parameters and return value:
https://github.com/ethereum/wiki/wiki/JSON-RPC#json-rpc-api

The way to calculate <position_str> is quite complicated if the datum is
not a simple element type. The position conforms to the storage slot as
specified by Solidity memory layout.

Solidity Memory Layout:
https://solidity.readthedocs.io/en/latest/miscellaneous.html#layout-of-state-variables-in-storage

A easy-to-understand explanation can be found at:
https://medium.com/aigang-network/how-to-read-ethereum-contract-storage-44252c8af925


This function returns a string representing the item "result" of the
RESPONSE from the RPC call. The buffer storing the string is maintained by
web3intf and the caller shall NOT modify it, free it or save the address
for later use.
\end{DoxyVerb}


\begin{DoxyReturn}{Returns}
This function returns a string representing a 32-\/byte value of the data~\newline
 stored at slot $<$position\+\_\+str$>$ of $<$address\+\_\+str$>$ of $<$block\+\_\+num\+\_\+str$>$ as~\newline
 specified in $<$param\+\_\+ptr$>$. Note that multiple data may be packed in one~\newline
 storage slot. See Solidity Memory Layout to understand how they are packed.~\newline
 If the blockchain node returns error or R\+PC call timeouts, it returns N\+U\+LL.
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em node\+\_\+url\+\_\+str} & A string indicating the U\+RL of blockchain node.\\
\hline
{\em param\+\_\+ptr} & The parameters of the eth\+\_\+get\+Storage\+At R\+PC method.~\newline
 ~\newline
 address\+\_\+str\+:~\newline
 D\+A\+TA, 20 Bytes -\/ address, a string such as \char`\"{}0x123456...\char`\"{}~\newline
 position\+\_\+str\+:~\newline
 Q\+U\+A\+N\+T\+I\+TY -\/ integer of the position in the storage.~\newline
 ~\newline
 block\+\_\+num\+\_\+str\+:~\newline
 Q\+U\+A\+N\+T\+I\+T\+Y$\vert$\+T\+AG -\/ a string of integer block number, or \char`\"{}latest\char`\"{}, \char`\"{}earliest\char`\"{} or \char`\"{}pending\char`\"{} \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{web3intf_8c_a6561f38f788b3ebe93c66a1db255377a}\label{web3intf_8c_a6561f38f788b3ebe93c66a1db255377a}} 
\index{web3intf.\+c@{web3intf.\+c}!web3\+\_\+eth\+\_\+get\+Transaction\+Count@{web3\+\_\+eth\+\_\+get\+Transaction\+Count}}
\index{web3\+\_\+eth\+\_\+get\+Transaction\+Count@{web3\+\_\+eth\+\_\+get\+Transaction\+Count}!web3intf.\+c@{web3intf.\+c}}
\subsubsection{\texorpdfstring{web3\+\_\+eth\+\_\+get\+Transaction\+Count()}{web3\_eth\_getTransactionCount()}}
{\footnotesize\ttfamily \mbox{\hyperlink{boattypes_8h_aebb9e13210d88d43e32e735ada43a425}{C\+H\+AR}}$\ast$ web3\+\_\+eth\+\_\+get\+Transaction\+Count (\begin{DoxyParamCaption}\item[{const char $\ast$}]{node\+\_\+url\+\_\+str,  }\item[{const \mbox{\hyperlink{web3intf_8h_af60968cddc872b9f87fbfa4f177c7cc6}{Param\+\_\+eth\+\_\+get\+Transaction\+Count}} $\ast$}]{param\+\_\+ptr }\end{DoxyParamCaption})}



Perform eth\+\_\+get\+Transaction\+Count R\+PC method and get the transaction count of the specified account. 



 Function\+: \mbox{\hyperlink{web3intf_8c_a6561f38f788b3ebe93c66a1db255377a}{web3\+\_\+eth\+\_\+get\+Transaction\+Count()}} \begin{DoxyVerb}This function calls RPC method eth_getTransactionCount and returns a string
representing the transaction count of the specified address.

The typical RPC REQUEST is similar to:
{"jsonrpc":"2.0","method":"eth_getTransactionCount","params":["0xc94770007dda54cF92009BFF0dE90c06F603a09f","latest"],"id":1}

The typical RPC RESPONSE from blockchain node is similar to:
{"id":1,"jsonrpc": "2.0","result": "0x1"}


This function takes 2 arguments. The first is the URL to the blockchian
node. Protocol and port must be explicitly specified in URL, such as
"http://127.0.0.1:7545". The second argument is a struct containing all
RPC call parameters as specified by ethereum.

See following wiki for details about RPC parameters and return value:
https://github.com/ethereum/wiki/wiki/JSON-RPC#json-rpc-api

This function returns a string representing the item "result" of the
RESPONSE from the RPC call. The buffer storing the string is maintained by
web3intf and the caller shall NOT modify it, free it or save the address
for later use.
\end{DoxyVerb}


\begin{DoxyReturn}{Returns}
This function returns a string representing the transaction count of the~\newline
 address specified in $<$param\+\_\+ptr$>$.~\newline
 For example, an address that has initiated 3 transactions will return~\newline
 \char`\"{}0x3\char`\"{}. Note the leading zeros are trimmed as specified in ethereum R\+PC~\newline
 interface.~\newline
 The transaction count is typically used as the \char`\"{}nonce\char`\"{} in a new transaction.~\newline
 If any error occurs or R\+PC call timeouts, it returns N\+U\+LL.
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em node\+\_\+url\+\_\+str} & A string indicating the U\+RL of blockchain node.\\
\hline
{\em param\+\_\+ptr} & The parameters of the eth\+\_\+get\+Transaction\+Count R\+PC method.~\newline
 address\+\_\+str\+:~\newline
 D\+A\+TA, 20 Bytes -\/ address, a string such as \char`\"{}0x123456...\char`\"{}~\newline
 block\+\_\+num\+\_\+str\+:~\newline
 Q\+U\+A\+N\+T\+I\+T\+Y$\vert$\+T\+AG -\/ a string of integer block number, or \char`\"{}latest\char`\"{}, \char`\"{}earliest\char`\"{} or \char`\"{}pending\char`\"{} \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{web3intf_8c_a114d1baf518f248dfad3d64ccca67f81}\label{web3intf_8c_a114d1baf518f248dfad3d64ccca67f81}} 
\index{web3intf.\+c@{web3intf.\+c}!web3\+\_\+eth\+\_\+get\+Transaction\+Receipt\+Status@{web3\+\_\+eth\+\_\+get\+Transaction\+Receipt\+Status}}
\index{web3\+\_\+eth\+\_\+get\+Transaction\+Receipt\+Status@{web3\+\_\+eth\+\_\+get\+Transaction\+Receipt\+Status}!web3intf.\+c@{web3intf.\+c}}
\subsubsection{\texorpdfstring{web3\+\_\+eth\+\_\+get\+Transaction\+Receipt\+Status()}{web3\_eth\_getTransactionReceiptStatus()}}
{\footnotesize\ttfamily \mbox{\hyperlink{boattypes_8h_aebb9e13210d88d43e32e735ada43a425}{C\+H\+AR}}$\ast$ web3\+\_\+eth\+\_\+get\+Transaction\+Receipt\+Status (\begin{DoxyParamCaption}\item[{const char $\ast$}]{node\+\_\+url\+\_\+str,  }\item[{const \mbox{\hyperlink{web3intf_8h_af16395f7148bffd6b025dbe680b88c8f}{Param\+\_\+eth\+\_\+get\+Transaction\+Receipt}} $\ast$}]{param\+\_\+ptr }\end{DoxyParamCaption})}



Perform eth\+\_\+get\+Transaction\+Receipt R\+PC method. 



 Function\+: web3\+\_\+eth\+\_\+get\+Transaction\+Receipt() \begin{DoxyVerb}This function calls RPC method eth_getTransactionReceipt and returns a
string representing the result.status of the receipt object of the
specified transaction hash.

The typical RPC REQUEST is similar to:
{"jsonrpc":"2.0","method":"eth_getTransactionReceipt","params":["0xb903239f8543d04b5dc1ba6579132b143087c68db1b2168786408fcbce568238"],"id":1}

The typical RPC RESPONSE from blockchain node is similar to:
\end{DoxyVerb}
 \begin{quote}
\{~\newline
 \char`\"{}id\char`\"{}\+:1,~\newline
 \char`\"{}jsonrpc\char`\"{}\+:\char`\"{}2.\+0\char`\"{},~\newline
 \char`\"{}result\char`\"{}\+: \{~\newline
 transaction\+Hash\+: \textquotesingle{}0xb903239f8543d04b5dc1ba6579132b143087c68db1b2168786408fcbce568238\textquotesingle{},~\newline
 transaction\+Index\+: \textquotesingle{}0x1\textquotesingle{}, // 1~\newline
 block\+Number\+: \textquotesingle{}0xb\textquotesingle{}, // 11~\newline
 block\+Hash\+: \textquotesingle{}0xc6ef2fc5426d6ad6fd9e2a26abeab0aa2411b7ab17f30a99d3cb96aed1d1055b\textquotesingle{},~\newline
 cumulative\+Gas\+Used\+: \textquotesingle{}0x33bc\textquotesingle{}, // 13244~\newline
 gas\+Used\+: \textquotesingle{}0x4dc\textquotesingle{}, // 1244~\newline
 contract\+Address\+: \textquotesingle{}0xb60e8dd61c5d32be8058bb8eb970870f07233155\textquotesingle{}, // or null, if none was created~\newline
 logs\+: \mbox{[}\{~\newline
 // logs as returned by get\+Filter\+Logs, etc.~\newline
 \}, ...\mbox{]},~\newline
 logs\+Bloom\+: \char`\"{}0x00...\+0\char`\"{}, // 256 byte bloom filter~\newline
 status\+: \textquotesingle{}0x1\textquotesingle{}~\newline
 \}~\newline
 \} \end{quote}


\begin{DoxyVerb}This function takes 2 arguments. The first is the URL to the blockchian
node. Protocol and port must be explicitly specified in URL, such as
"http://127.0.0.1:7545". The second argument is a struct containing all
RPC call parameters as specified by ethereum.

See following wiki for details about RPC parameters and return value:
https://github.com/ethereum/wiki/wiki/JSON-RPC#json-rpc-api

This function returns a string representing the item "result.status" of the
RESPONSE from the RPC call. The buffer storing the string is maintained by
web3intf and the caller shall NOT modify it, free it or save the address
for later use.
\end{DoxyVerb}


\begin{DoxyReturn}{Returns}
This function returns a string representing the status of the transaction~\newline
 receipt, \char`\"{}0x1\char`\"{} for success and \char`\"{}0x0\char`\"{} for failure. If the transaction is~\newline
 pending, it returns a null string i.\+e. a string containing only \textquotesingle{}\textbackslash{}0\textquotesingle{}~\newline
 instead of a N\+U\+LL pointer.~\newline
 If any error occurs or R\+PC call timeouts, it returns N\+U\+LL.
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em node\+\_\+url\+\_\+str} & A string indicating the U\+RL of blockchain node.\\
\hline
{\em param\+\_\+ptr} & The parameters of the eth\+\_\+get\+Transaction\+Receipt R\+PC method.~\newline
 ~\newline
 tx\+\_\+hash\+\_\+str\+:~\newline
 D\+A\+TA, 32 Bytes -\/ hash of a transaction \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{web3intf_8c_ae65319be9cc0257c333a14ed4ab504cf}\label{web3intf_8c_ae65319be9cc0257c333a14ed4ab504cf}} 
\index{web3intf.\+c@{web3intf.\+c}!web3\+\_\+eth\+\_\+send\+Raw\+Transaction@{web3\+\_\+eth\+\_\+send\+Raw\+Transaction}}
\index{web3\+\_\+eth\+\_\+send\+Raw\+Transaction@{web3\+\_\+eth\+\_\+send\+Raw\+Transaction}!web3intf.\+c@{web3intf.\+c}}
\subsubsection{\texorpdfstring{web3\+\_\+eth\+\_\+send\+Raw\+Transaction()}{web3\_eth\_sendRawTransaction()}}
{\footnotesize\ttfamily \mbox{\hyperlink{boattypes_8h_aebb9e13210d88d43e32e735ada43a425}{C\+H\+AR}}$\ast$ web3\+\_\+eth\+\_\+send\+Raw\+Transaction (\begin{DoxyParamCaption}\item[{const char $\ast$}]{node\+\_\+url\+\_\+str,  }\item[{const \mbox{\hyperlink{web3intf_8h_afa9fbcf8be2b8e8901a1725cf91d0287}{Param\+\_\+eth\+\_\+send\+Raw\+Transaction}} $\ast$}]{param\+\_\+ptr }\end{DoxyParamCaption})}



Perform eth\+\_\+send\+Raw\+Transaction R\+PC method. 



 Function\+: \mbox{\hyperlink{web3intf_8c_ae65319be9cc0257c333a14ed4ab504cf}{web3\+\_\+eth\+\_\+send\+Raw\+Transaction()}} \begin{DoxyVerb}This function calls RPC method eth_sendRawTransaction and returns a string
representing the transaction hash.

The typical RPC REQUEST is similar to:
{"jsonrpc":"2.0","method":"eth_sendRawTransaction","params":["0xd46e8dd67c5d32be8d46e8dd67c5d32be8058bb8eb970870f072445675058bb8eb970870f072445675"],"id":1}

The typical RPC RESPONSE from blockchain node is similar to:
{"id":1,"jsonrpc": "2.0","result": "0xe670ec64341771606e55d6b4ca35a1a6b75ee3d5145a99d05921026d1527331"}

This function takes 2 arguments. The first is the URL to the blockchian
node. Protocol and port must be explicitly specified in URL, such as
"http://127.0.0.1:7545". The second argument is a struct containing all
RPC call parameters as specified by ethereum.

See following wiki for details about RPC parameters and return value:
https://github.com/ethereum/wiki/wiki/JSON-RPC#json-rpc-api

This function returns a string representing the item "result" of the
RESPONSE from the RPC call. The buffer storing the string is maintained by
web3intf and the caller shall NOT modify it, free it or save the address
for later use.
\end{DoxyVerb}


\begin{DoxyReturn}{Returns}
This function returns a string representing a 32-\/byte transaction hash~\newline
 of the transaction if the blockchain node accepts the transaction in its~\newline
 pool. If this transaction is not yet avaialble, the returned hash is \char`\"{}0x0\char`\"{}.~\newline
 ~\newline
 If the blockchain node returns error or R\+PC call timeouts, it returns N\+U\+LL.~\newline
~\newline
 Note\+: A successful return from eth\+\_\+send\+Raw\+Transaction D\+O\+ES N\+OT mean the~\newline
 transaction is confirmed. The caller shall priodically polling the receipt~\newline
 using eth\+\_\+get\+Transaction\+Receipt method with the transaction hash returned~\newline
 by eth\+\_\+send\+Raw\+Transaction.
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em node\+\_\+url\+\_\+str} & A string indicating the U\+RL of blockchain node.\\
\hline
{\em param\+\_\+ptr} & The parameters of the eth\+\_\+send\+Raw\+Transaction R\+PC method.~\newline
 signedtx\+\_\+str\+:~\newline
 D\+A\+TA, The signed transaction data as a H\+EX string, with \char`\"{}0x\char`\"{} prefix. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{web3intf_8c_a1b4a7ab4c423675490f21482bfbde5ff}\label{web3intf_8c_a1b4a7ab4c423675490f21482bfbde5ff}} 
\index{web3intf.\+c@{web3intf.\+c}!web3\+\_\+init@{web3\+\_\+init}}
\index{web3\+\_\+init@{web3\+\_\+init}!web3intf.\+c@{web3intf.\+c}}
\subsubsection{\texorpdfstring{web3\+\_\+init()}{web3\_init()}}
{\footnotesize\ttfamily \mbox{\hyperlink{boattypes_8h_a032dd611b487ea287252cd8bea128df9}{B\+O\+A\+T\+\_\+\+R\+E\+S\+U\+LT}} web3\+\_\+init (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Initialize web3 interface. 



 Function\+: \mbox{\hyperlink{web3intf_8c_a1b4a7ab4c423675490f21482bfbde5ff}{web3\+\_\+init()}} \begin{DoxyVerb}This function initialize resources for web3 interface.
\end{DoxyVerb}


\begin{DoxyReturn}{Returns}
This function always returns B\+O\+A\+T\+\_\+\+S\+U\+C\+C\+E\+SS.
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em This} & function doesn\textquotesingle{}t take any argument. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{web3intf_8c_acb4a69aaceea7fb0b099d5596782d620}\label{web3intf_8c_acb4a69aaceea7fb0b099d5596782d620}} 
\index{web3intf.\+c@{web3intf.\+c}!web3\+\_\+\+J\+S\+O\+N\+\_\+parse\+\_\+item@{web3\+\_\+\+J\+S\+O\+N\+\_\+parse\+\_\+item}}
\index{web3\+\_\+\+J\+S\+O\+N\+\_\+parse\+\_\+item@{web3\+\_\+\+J\+S\+O\+N\+\_\+parse\+\_\+item}!web3intf.\+c@{web3intf.\+c}}
\subsubsection{\texorpdfstring{web3\+\_\+\+J\+S\+O\+N\+\_\+parse\+\_\+item()}{web3\_JSON\_parse\_item()}}
{\footnotesize\ttfamily \mbox{\hyperlink{boattypes_8h_a032dd611b487ea287252cd8bea128df9}{B\+O\+A\+T\+\_\+\+R\+E\+S\+U\+LT}} web3\+\_\+\+J\+S\+O\+N\+\_\+parse\+\_\+item (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{boattypes_8h_aebb9e13210d88d43e32e735ada43a425}{C\+H\+AR}} $\ast$}]{rpc\+\_\+response\+\_\+str,  }\item[{const \mbox{\hyperlink{boattypes_8h_aebb9e13210d88d43e32e735ada43a425}{C\+H\+AR}} $\ast$}]{item\+\_\+name }\end{DoxyParamCaption})}



Parse an item from a J\+S\+ON string. 



 Function\+: \mbox{\hyperlink{web3intf_8c_acb4a69aaceea7fb0b099d5596782d620}{web3\+\_\+\+J\+S\+O\+N\+\_\+parse\+\_\+item()}} \begin{DoxyVerb}This function parse a JSON string and find a specified item in it.

This function can only find the first level item in the JSON string. It
doesn't support finding an item in inner JSON struct.
\end{DoxyVerb}


\begin{DoxyRemark}{Remarks}
This function uses global variable g\+\_\+web3\+\_\+result\+\_\+string\+\_\+buf to output the content of the specified item.
\end{DoxyRemark}
\begin{DoxyReturn}{Returns}
This function returns B\+O\+A\+T\+\_\+\+S\+U\+C\+C\+E\+SS if the specified item is found. Otherwise it returns an error code.
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em to\+\_\+big\+\_\+ptr} & The buffer to hold the converted binary stream.~\newline
 It\textquotesingle{}s safe to ensure its size $>$= ($<$from\+\_\+up\+\_\+to\+\_\+len$>$+1)/2 bytes.\\
\hline
\mbox{\tt in}  & {\em rpc\+\_\+response\+\_\+str} & The J\+S\+ON string to parse.\\
\hline
\mbox{\tt in}  & {\em item\+\_\+name} & The name of the item to search. For example, \char`\"{}result\char`\"{}. \\
\hline
\end{DoxyParams}


\subsection{Variable Documentation}
\mbox{\Hypertarget{web3intf_8c_aea9352a07b6c75e66af94c1d9db0d05f}\label{web3intf_8c_aea9352a07b6c75e66af94c1d9db0d05f}} 
\index{web3intf.\+c@{web3intf.\+c}!g\+\_\+web3\+\_\+json\+\_\+string\+\_\+buf@{g\+\_\+web3\+\_\+json\+\_\+string\+\_\+buf}}
\index{g\+\_\+web3\+\_\+json\+\_\+string\+\_\+buf@{g\+\_\+web3\+\_\+json\+\_\+string\+\_\+buf}!web3intf.\+c@{web3intf.\+c}}
\subsubsection{\texorpdfstring{g\+\_\+web3\+\_\+json\+\_\+string\+\_\+buf}{g\_web3\_json\_string\_buf}}
{\footnotesize\ttfamily \mbox{\hyperlink{boattypes_8h_aebb9e13210d88d43e32e735ada43a425}{C\+H\+AR}} g\+\_\+web3\+\_\+json\+\_\+string\+\_\+buf\mbox{[}\mbox{\hyperlink{web3intf_8c_af8e2a9e3ee913a177be5958dede7bf6a}{W\+E\+B3\+\_\+\+J\+S\+O\+N\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+B\+U\+F\+\_\+\+M\+A\+X\+\_\+\+S\+I\+ZE}}\mbox{]}}



A J\+S\+ON string buffer used for both R\+E\+Q\+U\+E\+ST and R\+E\+S\+P\+O\+N\+SE. 

\mbox{\Hypertarget{web3intf_8c_a5501302a7b6519a397f668181845eb58}\label{web3intf_8c_a5501302a7b6519a397f668181845eb58}} 
\index{web3intf.\+c@{web3intf.\+c}!g\+\_\+web3\+\_\+message\+\_\+id@{g\+\_\+web3\+\_\+message\+\_\+id}}
\index{g\+\_\+web3\+\_\+message\+\_\+id@{g\+\_\+web3\+\_\+message\+\_\+id}!web3intf.\+c@{web3intf.\+c}}
\subsubsection{\texorpdfstring{g\+\_\+web3\+\_\+message\+\_\+id}{g\_web3\_message\_id}}
{\footnotesize\ttfamily \mbox{\hyperlink{boattypes_8h_ae1e6edbbc26d6fbc71a90190d0266018}{U\+I\+N\+T32}} g\+\_\+web3\+\_\+message\+\_\+id = 0}



Message ID to distinguish different messages. 

\mbox{\Hypertarget{web3intf_8c_a80e97b532acd8e557ae2ca218e35cb02}\label{web3intf_8c_a80e97b532acd8e557ae2ca218e35cb02}} 
\index{web3intf.\+c@{web3intf.\+c}!g\+\_\+web3\+\_\+result\+\_\+string\+\_\+buf@{g\+\_\+web3\+\_\+result\+\_\+string\+\_\+buf}}
\index{g\+\_\+web3\+\_\+result\+\_\+string\+\_\+buf@{g\+\_\+web3\+\_\+result\+\_\+string\+\_\+buf}!web3intf.\+c@{web3intf.\+c}}
\subsubsection{\texorpdfstring{g\+\_\+web3\+\_\+result\+\_\+string\+\_\+buf}{g\_web3\_result\_string\_buf}}
{\footnotesize\ttfamily \mbox{\hyperlink{boattypes_8h_aebb9e13210d88d43e32e735ada43a425}{C\+H\+AR}}$\ast$ g\+\_\+web3\+\_\+result\+\_\+string\+\_\+buf = \mbox{\hyperlink{web3intf_8c_aea9352a07b6c75e66af94c1d9db0d05f}{g\+\_\+web3\+\_\+json\+\_\+string\+\_\+buf}}}

